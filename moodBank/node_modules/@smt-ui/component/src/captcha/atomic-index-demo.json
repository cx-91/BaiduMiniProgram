{
    "name": "smt-captcha",
    "label": "图形验证码",
    "autoReadme": false,
    "description": "图形验证码组件，一般用于表单项提交时后端校验。防止连续提交，高效拦截机器行为。",
    "codeSnap": "<smt-captcha verify-img-url=\"https://b.bdstatic.com/searchbox/icms/searchbox/img/smt_ui_carptcha_1.png\"></smt-captcha>",
    "fragement": "swanide://fragment/cbe381cf46dc86b665fad5b815dc83d11598794476041",
    "groups": "layout",
    "demopath": "extensions/component/smt-captcha/smt-captcha",
    "webUrl": "https://qft12m.smartapps.cn/extensions/component/smt-captcha/smt-captcha",
    "demoCode": {
        "s": "<view class=\"captcha-container\">\n    <custom chineseName=\"图形验证码\" engName=\"captcha\"></custom>\n    <view class=\"content\">\n        <block s-for=\"{{list}}\">\n            <view class=\"mode-title-container first\">\n                <template is=\"mode-title\" title=\"{{item.title}}\"></template>\n            </view>\n            <view class=\"content-item\">\n                <smt-captcha\n                    id=\"{{'smt-captcha-' + index}}\"\n                    verify-img-url=\"{{item.verifyImgUrl}}\"\n                    input-err-msg=\"{{item.inputErrMsg}}\"\n                    label-width=\"{{item.labelWidth}}\"\n                    placeholder=\"{{item.placeholder}}\"\n                    label=\"{{item.label}}\"\n                    border=\"{{false}}\"\n                    bindinput=\"bindInput\"\n                    data-info=\"{{index}}\"\n                    bindblur=\"blurHld\"\n                    bind:refreshimg=\"refreshImg\"\n                ></smt-captcha>\n            </view>\n        </block>\n    </view>\n    <!-- 解决ios 部分机型 margin-bottom 不管用的问题 -->\n    <view class=\"grid-marign-bottom\"></view>\n</view>",
        "css": "* {\n    box-sizing: content-box;\n}\n\n.grid-marign-bottom {\n    height: 72.464rpx;\n}\n\n.mode-title-container {\n    margin-top: 72.464rpx;\n    margin-bottom: 25.362rpx;\n}\n\n.mode-title-container:first-of-type {\n    margin-top: 34.043rpx;\n}\n\n.content-item {\n    font-size: 32.61rpx;\n    background-color: #fff;\n}",
        "js": "/* global Page */\n\n/* eslint-disable babel/new-cap */\nPage({\n/* eslint-enable babel/new-cap */\n    data: {\n        codeImgList: [\n            'https://b.bdstatic.com/searchbox/icms/searchbox/img/smt_ui_carptcha_1.png',\n            'https://b.bdstatic.com/searchbox/icms/searchbox/img/smt_ui_carptcha_2.png',\n            'https://b.bdstatic.com/searchbox/icms/searchbox/img/smt_ui_carptcha_3.png',\n            'https://b.bdstatic.com/searchbox/icms/searchbox/img/smt_ui_carptcha_4.png',\n            ''\n        ],\n        list: [\n            {\n                prevNum: 1,\n                valueData: '',\n                title: '默认样式',\n                label: '验证码',\n                labelWidth: '4em',\n                placeholder: '请输入验证码',\n                value: '',\n                maxlength: 4,\n                verifyImgUrl: 'https://b.bdstatic.com/searchbox/icms/searchbox/img/smt_ui_carptcha_1.png',\n                inputErrMsg: '',\n                time: 500\n            },\n            {\n                prevNum: 1,\n                valueData: '',\n                title: '刷新中样式',\n                labelWidth: '4em',\n                placeholder: '图形验证码刷新中',\n                label: '验证码',\n                value: '',\n                maxlength: 4,\n                verifyImgUrl: 'https://b.bdstatic.com/searchbox/icms/searchbox/img/smt_ui_carptcha_1.png',\n                inputErrMsg: '',\n                time: 500000\n            },\n            {\n                prevNum: 1,\n                valueData: '',\n                title: '刷新样式',\n                labelWidth: '4em',\n                placeholder: '点击刷新图形验证码',\n                label: '验证码',\n                value: '',\n                maxlength: 4,\n                verifyImgUrl: 'https://b.bdstatic.com/searchbox/icms/searchbox/img/smt_ui_carptcha_1.png',\n                inputErrMsg: '',\n                time: 5\n            },\n            {\n                prevNum: 1,\n                valueData: '',\n                title: '自定义样式',\n                placeholder: '请输入验证码',\n                labelWidth: '6em',\n                label: '验证码',\n                value: '',\n                maxlength: 4,\n                verifyImgUrl: 'https://b.bdstatic.com/searchbox/icms/searchbox/img/smt_ui_carptcha_1.png',\n                inputErrMsg: '',\n                time: 500\n            }\n        ],\n        index: ''\n    },\n\n    onReady() {\n        setTimeout(() => {\n            this.selectComponent('#smt-captcha-1').refreshImg();\n            this.selectComponent('#smt-captcha-2').refreshImg();\n        }, 500);\n    },\n\n    /**\n     * 模拟更新验证码图片\n     *\n     * @param {Event} e 事件详情\n     */\n    refreshImg(e) {\n        const index = e.currentTarget.dataset.info;\n        this.data.index = index;\n        const time = this.data.list[index].time;\n        if (index === 2) {\n            e.reload();\n            return;\n        }\n        setTimeout(() => {\n            let num = this.data.list[index].prevNum ++;\n            if (num > 5) {\n                this.data.list[index].prevNum = 0;\n            }\n            this.data.list[index].verifyImgUrl = this.data.codeImgList[num];\n            if (!this.data.list[index].verifyImgUrl) {\n                e.reload();\n            }\n            this.setData('list', this.data.list);\n        }, time);\n    },\n\n    /**\n     * 验证码输入事件\n     *\n     * @param {Event} e 事件详情\n     */\n    bindInput(e) {\n        const index = e.currentTarget.dataset.info;\n        this.data.list[index].valueData = e.detail;\n    },\n\n    /**\n     * 失焦事件\n     *\n     * @param {Event} e 事件详情\n     */\n    blurHld(e) {\n        const index = e.currentTarget.dataset.info;\n        const {iptValue, check} = this.data.list[index].valueData;\n        if (check || !iptValue) {\n            this.data.list[index].inputErrMsg = '';\n        }\n        else {\n            this.data.list[index].inputErrMsg = '请输入正确的验证码';\n        }\n        this.setData('list', this.data.list);\n    }\n});\n",
        "json": "{\n    \"navigationBarTitleText\": \"图形验证码\",\n    \"navigationStyle\": \"custom\",\n    \"usingComponents\": {\n        \"smt-captcha\": \"@smt-ui/component/src/captcha\",\n        \"custom\": \"/common/components/custom/custom\"\n    }\n}"
    },
    "properties": {
        "attributes": [{
            "name": "verifyImgUrl",
            "type": "String",
            "description": "图片验证码的 url 地址。",
            "required": "是",
            "default": ""
        },
        {
            "name": "labelWidth",
            "type": "String",
            "description": "label宽度 默认四字。",
            "required": "否",
            "default": "24px"
        },
        {
            "name": "label",
            "type": "String",
            "description": "输入框左侧文案。",
            "required": "否",
            "default": ""
        },
        {
            "name": "inputName",
            "type": "String",
            "description": "定义 input name 属性，一般作为表单提交的 key。",
            "required": "否",
            "default": "code"
        },
        {
            "name": "placeholder",
            "type": "String",
            "description": "输入框占位文案。",
            "required": "否",
            "default": "请输入验证码"
        },
        {
            "name": "placeholderColor",
            "type": "String",
            "description": "输入框占位文案颜色。",
            "required": "否",
            "default": "#ccc"
        },
        {
            "name": "value",
            "type": "String",
            "description": "输入框 value。",
            "required": "否",
            "default": ""
        },
        {
            "name": "type",
            "type": "String",
            "description": "input 调起键盘类型：text、number、idcard、digit。",
            "required": "否",
            "default": "text"
        },
        {
            "name": "maxlength",
            "type": "Number",
            "description": "input 输入最大长度。",
            "required": "否",
            "default": "4"
        },
        {
            "name": "focus",
            "type": "Boolean",
            "description": "获取聚焦，调起键盘。",
            "required": "否",
            "default": "false"
        },
        {
            "name": "confirmType",
            "type": "String",
            "description": "键盘右下角提交文案，详细配置见基础组件 [input](https://smartprogram.baidu.com/docs/develop/component/formlist_input/)。",
            "required": "否",
            "default": "done"
        },{
            "name": "inputErrMsg",
            "type": "String",
            "description": "错误提示信息，有值时左侧 label 会漂红。",
            "required": "否",
            "default": ""
        }],
        "events": [{
            "name": "input",
            "type": "Event",
            "description": "input 输入事件。",
            "required": "否",
            "default": ""
        },
        {
            "name": "blur",
            "type": "Event",
            "description": "nput 失焦事件。",
            "required": "否",
            "default": ""
        },
        {
            "name": "focus",
            "type": "Event",
            "description": "input 聚焦事件。",
            "required": "否",
            "default": ""
        },
        {
            "name": "confirm",
            "type": "Event",
            "description": "点击键盘右下角完成按钮触发事件。",
            "required": "否",
            "default": ""
        },
        {
            "name": "refreshimg",
            "type": "Event",
            "description": "更改验证码事件。`e.detail = {iptValue: 'input输入值', iptName: '传入的 iptName', check: 'boolean值，是否满足最大输入长度'}`",
            "required": "否",
            "default": ""
        }]
    }
}
